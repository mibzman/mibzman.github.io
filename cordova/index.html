<!DOCTYPE html>
<html lang="en">

<!-- layout.ejs-->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="The homepage for Sam Borick">
    <meta name="author" content="Sam Borick">
    <meta name="keyword" content="sam, borick, developer, hungerperks, moonlight">
    <link rel="canonical" href="http://borick.net/cordova/">
    <link rel="shortcut icon" href="favicon.png">
    <link rel="alternate" type="application/atom+xml" title="&lt;font face=&#34;verdana&#34; size=&#34;6&#34; color=&#34;black&#34;&gt;Sam&#39;s Homepage&lt;/font&gt;" href="/atom.xml">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/smoothness/jquery-ui.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>

    <title>
        
        How to develop new Cordova plugins for Ionic without loosing your mind｜Sam Borick&#39;s Homepage
        
    </title>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

    <link rel="stylesheet" href="/css/main.css">

    
      <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
      <link rel="stylesheet" href="/css/highlight.css">
    

    


    

    

    


    
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


    




    <script async defer src="https://buttons.github.io/buttons.js"></script>

    <!-- user customization -->
    <link rel="stylesheet" href="/css/arsnippet.css">
    <script src="/js/arsnippet.css.js"></script>
</head>

<style>
    header.intro-header {
        background-image: url('')
    }
</style>
<!-- hack iOS CSS :active style -->
<body ontouchstart="" class="animated fadeIn">
<header>
  <nav class="navbar navbar-default header-navbar" id="nav-top" data-ispost = "true" data-istags="false" data-ishome = "false" >
    <div class="container-fluid">
      <div class="navbar-header page-scroll">
        <button type="button" class="navbar-toggle" data-toggle="collapse" aria-expanded="false"  data-target="#website_navbar">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <span class="navbar-brand animated pulse">
          <a class="brand-logo" href="/">
            <font face="verdana" size="6" color="black">Sam's Homepage</font>
          </a>
        </span>
      </div>

      <div class="collapse navbar-collapse" id="website_navbar">
          <ul class="nav navbar-nav navbar-right">
              
                <li>
                  <a href="/">home</a>
                </li>
              
                <li>
                  <a href="/about/">About</a>
                </li>
              
          </ul>
      </div>
  </nav>


  
    <style>
       .intro-header {
          background-image: url('/img/sky-clouds-moon-horizon.jpg?h=350&amp;auto=compress&amp;cs=tinysrgb');
      }
    </style>

    <div class="intro-header">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1 text-center">
                    <div class="site-heading">
                        <h1>How to develop new Cordova plugins for Ionic without loosing your mind</h1>
                        
                        
                          <span class="meta">
                               <span class="meta-item">Author: Sam Borick</span>
                               <span class="meta-item">Date: Jan 12, 2018</span>
                               
                                 <span class="meta-item">Updated On: Jun 10, 2018</span>
                               
                          </span>
                          <div class="tags text-center">
                              Categories: 
                          </div>
                          <div class="tags text-center">
                              Tags: 
                              <a class="tag" href="/tags/#nerd"
                                 title="nerd">nerd</a>
                              
                          </div>
                        
                    </div>
                </div>
            </div>
        </div>
    </div>
  
</header>


<!-- Main Content -->
<!-- post.ejs -->
<article>
    <div class="container">
      <div class="col-lg-8 col-lg-offset-1 col-sm-9">
          
            <div class="text-center"><div class="addthis_inline_share_toolbox">
  <script type = "text/javascript" src = "//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5272bc2a7b3c1ddc" async = "async" ></script>
</div>
</div><hr>
          
          <div class="subscribe"><a href="https://mailchi.mp/4d42a8947de4/samsmail" target="_blank">Subscribe!</a></div><p>
          <p>After 9 months of running a production Ionic App (HungerPerks), we finally got to the point where we needed a custom Cordova plugin, distinct enough to not be able to just fork an existing one and make changes to it. Unfortunately, all the articles, Github repos, and documentation were all some combination of outdated, incomplete, or broken.</p>
<p>This article will broadly discuss:</p>
<ol>
<li>The parts of a Cordova plugin, and where they live in an Ionic app</li>
<li>A simple example plugin</li>
<li>How to develop a plugin in a sane way<br>Now let’s get started!!</li>
</ol>
<h1 id="The-parts-of-a-Cordova-plugin"><a href="#The-parts-of-a-Cordova-plugin" class="headerlink" title="The parts of a Cordova plugin"></a>The parts of a Cordova plugin</h1><p>In an Ionic project (say ExampleProject), when you run</p>
<p><code>ionic cordova plugin add &lt;some-cordova-plugin&gt;</code></p>
<p>The Cordova cli goes to the repo where the plugin is stored, and pulls it into the plugins folder within the project (i.e. ExampleProject/plugins/some-cordova-plugin). This is essentially a storehouse for when ionic builds a platform. At this point, when you run</p>
<p><code>ionic cordova platform add &lt;android/ios&gt;</code><br>as a part of the platform add process, Ionic will copy the platform specefic plugin code into the platform build folder. This is where the plugin code lives that is actually deployed onto devices when built or run.</p>
<p>Why should you care? Because when you are working on an in-house plugin, there are three identical copies of the same code, two of which will do nothing to the code on the device when modified without some kind of plugin reinstall or platform reinstall. Worth noting about this setup is that changes to platform plugin code within the platform build folder will be deployed to devices, but I have not yet found a way to changes the javascript code without reinstalling the plugin.</p>
<h1 id="A-simple-example"><a href="#A-simple-example" class="headerlink" title="A simple example"></a>A simple example</h1><p>Before continuing on, I would highly recommend reading this article on writing Cordova plugins, It discusses objective-c for the ios portion, but otherwise explains the parts of a Cordova plugin well.</p>
<p>Based off of that example, I have created a plugin that does most of the same things in swift 3. Take a look at <a href="https://github.com/mibzman/example-cordova-plugin" target="_blank" rel="noopener">https://github.com/mibzman/example-cordova-plugin</a>. This plugin (as of Jan 12, ’18) works with the current version of ionic cli (3.19.0), as well as swift 3.2.</p>
<p>Now that we have these plugins, how do we actually use them in our ionic applications? For most developers, their only experience with plugins is through ionic-native, which provides nice typescript bindings. How do we actually call these custom plugins?</p>
<p>First look at the www/plugin.js of the plugin you want to integrate. The last line is:</p>
<p>module.exports = ExampleCordovaPlugin;<br>You can take this info and use it in your ionic application like so:</p>
<p>Hooray! We used someone else’s plugin just like we’ve done all along! Now what?</p>
<h1 id="How-to-develop-a-plugin"><a href="#How-to-develop-a-plugin" class="headerlink" title="How to develop a plugin"></a>How to develop a plugin</h1><p>So how do we make changes? The first instinct I had was to make changes in the plugin repo in something like sublime, commit them, and reinstall the plugin in a test application. Spoiler alert: that’s terrible for many, many reasons. One big one is that it takes forever for changes regardless of size. How can we do it in a way that makes more sense?</p>
<p>iOS is a simple example. Open the</p>
<p>ExampleProject/platforms/ios/MyApp.xcodeproj<br>file in Xcode, and take a peak in the plugins folder. In there you’ll find all the iOS project files from all the plugins, all unfolded. Somewhere in there is the file for the plugin you care about! Since we learned earlier that changes to the code in the platform folder can be deployed immediately, we can tweak and play away!</p>
<p>This same thing can be done with android studio with the platforms/android folder, but you should use the ionic-cli android build, the android studio build process seems to muck with the ionic gradle build stuff.</p>
<p>The only thing to keep in mind is that changes in these files have to be moved into your actual plugin repo. Since the platform folder is technically build output of ionic, the expectation is that it can be deleted whenever, so be sure to be proactive about moving your changes out of the platform folder.</p>
<p>Finally I noticed some wonkiness when changing plugin names or id’s, so as a rule of thumb if strange things are happening, take a peak at your project’s package.lock, remove references to your plugin, blow away that node_modules folder, and reinstall everything.</p>
<p>I hope you found this somewhat helpful, and hopefully I’ve done a good job of synthesizing some of these concepts I’ve found scattered all over.</p>
<p>Edit: I published the example ionic application that works with this plugin at <a href="https://github.com/mibzman/PluginTester" target="_blank" rel="noopener">https://github.com/mibzman/PluginTester</a>.</p>

          
          <hr>
          <ul class="pager">
              
              <li class="previous">
                  <a href="/pitch/" data-toggle="tooltip" data-placement="left"
                     title="Want to Win a Pitch? Ignore the Pitch.">&larr; Previous Post</a>
              </li>
              
              
              <li class="next">
                  <a href="/antics/" data-toggle="tooltip" data-placement="top"
                     title="Antics of Steely-Eyed Missile Men">Next Post&rarr;</a>
              </li>
              
          </ul>
        
  <br>
  

  
  </div>


        
  <div class="hidden-xs col-sm-3 toc-col">
    <div class="toc-wrap">
        Table of Contents
        
          <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#The-parts-of-a-Cordova-plugin"><span class="toc-number">1.</span> <span class="toc-text">The parts of a Cordova plugin</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#A-simple-example"><span class="toc-number">2.</span> <span class="toc-text">A simple example</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#How-to-develop-a-plugin"><span class="toc-number">3.</span> <span class="toc-text">How to develop a plugin</span></a></li></ol>
        
    </div>
  </div>


      </div>
  </div>
</article>

<!-- Footer -->
<!-- footer.ejs -->
<footer>
    <div class="text-center">
      <ul class="list-inline">
          
              <li>
                  <a href="/atom.xml" target="_blank">
                      <span class="fa-stack fa-lg">
                          <i class="fa fa-circle fa-stack-2x"></i>
                          <i class="fa fa-rss fa-stack-1x fa-inverse"></i>
                      </span>
                  </a>
              </li>
          
          
              <li>
                  <a target="_blank" href="https://twitter.com/mibzman">
                      <span class="fa-stack fa-lg">
                          <i class="fa fa-circle fa-stack-2x"></i>
                          <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                      </span>
                  </a>
              </li>
          
          

          

          

          
              <li>
                  <a target="_blank"  href="https://github.com/mibzman">
                      <span class="fa-stack fa-lg">
                          <i class="fa fa-circle fa-stack-2x"></i>
                          <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                      </span>
                  </a>
              </li>
          

          

          
              <li>
                  <a href="mailto:sam@borick.net" target="_blank">
                      <span class="fa-stack fa-lg">
                          <i class="fa fa-circle fa-stack-2x"></i>
                          <i class="fa fa-envelope fa-stack-1x fa-inverse"></i>
                      </span>
                  </a>
              </li>
          

      </ul>
     <div class="text-muted copyright">
            &copy;
            
              2018
            
            
              <i class="fa fa-hand-spock"></i>
            
            Sam Borick
        <br>
          
              Powered by <a target="_blank" href="https://hexo.io">Hexo</a>
          
          
            |
          
          
              Theme - <a href="https://github.com/huyingjie/hexo-theme-A-RSnippet" target="_blank">A-RSnippet</a> v0.1.0
          
          
      </div>
    </div>
</footer>

<!-- Custom Theme JavaScript -->
<script src="/js/main.js"></script>

<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>

<!--fastClick.js -->
<script>
    async("//cdn.bootcss.com/fastclick/1.0.6/fastclick.min.js", function(){
        var $nav = document.querySelector("nav");
        if($nav) FastClick.attach($nav);
    })
</script>



</body>

</html>
